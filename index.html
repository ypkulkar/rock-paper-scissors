<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <script>
            function computerPlay(){
                let choices = ["rock","paper","scissors"];
                let rand = Math.floor(Math.random() * 3); // Selects a random number between 1 and 3
                let res = choices[rand];
                return res;
            }

            function playRound(playerSelection, computerSelection){ // returns 1 if user wins, 0 if tie and -1 if loses
                let res = "";
                let score = 0;
                switch(playerSelection){
                    case "rock":
                        switch(computerSelection){
                            case "rock":
                                res = "It is a tie!";
                                score = 0;
                                break;
                            case "paper":
                                res = "You Lose! Paper beats Rock";
                                score = -1;
                                break;
                            case "scissors":
                                res = "You Win! Rock beats Scissors";
                                score = 1;
                                break;
                        }
                        break;
                    case "paper":
                        switch(computerSelection){
                            case "rock":
                                res = "You win! Paper beats Rock";
                                score = 1;
                                break;
                            case "paper":
                                res = "It is a tie!";
                                score = 0;
                                break;
                            case "scissors":
                                res = "You Lose! Scissors beats Paper";
                                score = -1;
                                break;
                        }
                        break;
                    case "scissors":
                        switch(computerSelection){
                            case "rock":
                                res = "You Lose! Rock beats Scissors";
                                score = -1;
                                break;
                            case "paper":
                                res = "You Win! Scissors beats Paper";
                                score = 1;
                                break;
                            case "scissors":
                                res = "It is a tie!";
                                score = 0;
                                break;
                        }
                        break;
                }
                return [res,score];
            }

            function parseString(str){
                return str.toLowerCase();
            }

            function game(){
                
                let usrInput = "";
                let cpuInput = "";
                let usrScore = 0;
                let cpuScore = 0;
                let round = 0;
                let index = 0;
                let choices = ["rock","paper","scissors"];

                while(index < 5){
  
                    rawUsrInput = prompt("Choose between Rock, Paper and Scissors:","");
                    usrInput = parseString(rawUsrInput);
                    if(!choices.includes(usrInput)){
                        console.log("Please choose a valid option!");
                        continue;
                    }

                    cpuInput = computerPlay();
                    round = playRound(usrInput,cpuInput);
                    console.log(round[0]);
                    switch(round[1]){
                        case 1:
                            usrScore++;
                            break;
                        case 0:
                            break;
                        case -1:
                            cpuScore++;
                    }

                    console.log(`SCORE: usr = ${usrScore} cpu = ${cpuScore}`);
                    index++;
                }

                console.log(`Your score is ${usrScore}`);
                console.log(`CPU score is ${cpuScore}`);
                let finalRes = (usrScore > cpuScore)? "YOU WON!":
                (cpuScore > usrScore)? "YOU LOST!": "IT'S A DRAW!";
                console.log(finalRes);

            }
            game();
        </script>
    </body>
</html>